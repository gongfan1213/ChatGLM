### 42 | ChatGLM3å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²ã€åº”ç”¨å¼€å‘ä¸å¾®è°ƒ

å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œè¿™é‡Œæä¾›äº†3ç§æˆªç„¶ä¸åŒçš„è¾“å…¥æ–¹å¼ï¼Œå³æ–‡æœ¬è¾“å…¥ã€é€šè¿‡é€‰æ‹©æ¡†è¿›è¡Œé€‰é¡¹é€‰æ‹©ï¼Œä»¥åŠé€šè¿‡æ»šåŠ¨æ¡è¿›è¡Œè°ƒèŠ‚ã€‚æ‰€æœ‰è¿™äº›è¾“å…¥æ–¹å¼æœ€ç»ˆéƒ½ä¼šè¢«greetå‡½æ•°å¤„ç†ï¼Œè¿›è€Œäº§ç”ŸåŒ…å«æ–‡æœ¬å’Œæ•°å­—ä¸¤ç§ç±»å‹çš„ç»“æœä½œä¸ºè¾“å‡ºã€‚


### 3.1.4 gradioä¸­å¤šæ ·åŒ–çš„è¾“å…¥å’Œè¾“å‡ºç»„ä»¶

åœ¨gradioä¸­ï¼Œåˆç†è€Œå·§å¦™åœ°ä½¿ç”¨å¤šç§ç±»å‹çš„è¾“å…¥å’Œè¾“å‡ºç»„ä»¶ï¼Œæ˜¯æ„å»ºçµæ´»å’Œé€‚åº”æ€§å¼ºçš„æœºå™¨å­¦ä¹ æ¨¡å‹ç•Œé¢çš„å…³é”®ã€‚

1. **å¤„ç†ä¸åŒç±»å‹çš„è¾“å…¥ç»„ä»¶**

    - **ç»„åˆä¸åŒè¾“å…¥ç±»å‹**ï¼šåˆ©ç”¨gradioçš„çµæ´»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å•ä¸ªç•Œé¢ä¸­æ··åˆä½¿ç”¨å¤šç§è¾“å…¥ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œè¯»è€…å¯ä»¥åˆ›å»ºä¸€ä¸ªç•Œé¢ï¼Œåœ¨ç•Œé¢ä¸­ç”¨æˆ·æ—¢å¯ä»¥ä¸Šä¼ å›¾ç‰‡ï¼ˆä½¿ç”¨gr.Image()ï¼‰ï¼Œåˆå¯ä»¥è¾“å…¥æè¿°æ€§æ–‡æœ¬ï¼ˆä½¿ç”¨gr.TextBox()ï¼‰ã€‚è¿™ç§ç»„åˆè¾“å…¥ç‰¹åˆ«é€‚ç”¨äºéœ€è¦å¤šæ¨¡æ€æ•°æ®ï¼ˆå¦‚å›¾åƒå’Œæ–‡æœ¬ï¼‰çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚
    - **é€‰æ‹©åˆé€‚çš„è¾“å…¥ç±»å‹**ï¼šä»”ç»†è€ƒè™‘æ¨¡å‹éœ€è¦ä»€ä¹ˆæ ·çš„è¾“å…¥æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå›¾åƒè¯†åˆ«ä»»åŠ¡ï¼Œgr.Image()æ˜¯æ˜¾è€Œæ˜“è§çš„é€‰æ‹©ï¼›è€Œå¯¹äºæ–‡æœ¬ç¿»è¯‘æˆ–æ‘˜è¦ç”Ÿæˆï¼Œgr.TextBox()æˆ–gr.Textarea()å¯èƒ½æ›´åˆé€‚ã€‚é€‰æ‹©ä¸æ¨¡å‹è¾“å…¥æ ¼å¼å…¼å®¹çš„ç»„ä»¶ï¼Œä»¥å‡å°‘æ•°æ®é¢„å¤„ç†çš„éœ€è¦ã€‚ 
    - **è‡ªå®šä¹‰è¾“å…¥è®¾ç½®**ï¼šé€šè¿‡è°ƒæ•´è¾“å…¥ç»„ä»¶çš„å‚æ•°æ¥ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨gr.Slider()æ—¶ï¼Œå¯ä»¥è®¾ç½®æ»‘å—çš„æœ€å°å€¼ã€æœ€å¤§å€¼å’Œæ­¥é•¿ï¼Œä»¥ç¡®ä¿ç”¨æˆ·è¾“å…¥åœ¨æ¨¡å‹å¯æ¥å—çš„èŒƒå›´å†…ã€‚å¯¹äºgr.Dropdown()æˆ–gr.Radio()ç­‰é€‰æ‹©å‹è¾“å…¥ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°ã€ç®€æ´çš„é€‰é¡¹åˆ—è¡¨ï¼Œä»¥å‡å°‘ç”¨æˆ·çš„è®¤çŸ¥è´Ÿæ‹…ã€‚

2. **å¤„ç†ä¸åŒç±»å‹çš„è¾“å‡ºç»„ä»¶**
    - **å±•ç¤ºå¤šæ ·åŒ–çš„è¾“å‡º**ï¼šæ ¹æ®æ¨¡å‹çš„è¾“å‡ºç±»å‹é€‰æ‹©åˆé€‚çš„gradioè¾“å‡ºç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå›¾åƒå¤„ç†ä»»åŠ¡ï¼Œä½¿ç”¨gr.Image()æ¥å±•ç¤ºå¤„ç†åçš„å›¾åƒï¼›å¯¹äºæ–‡æœ¬ç”Ÿæˆä»»åŠ¡ï¼Œä½¿ç”¨gr.Text()æ¥æ˜¾ç¤ºç”Ÿæˆçš„æ–‡æœ¬ã€‚å¦‚æœæ¨¡å‹èƒ½å¤Ÿäº§ç”Ÿå¤šç§ç±»å‹çš„è¾“å‡ºï¼ˆå¦‚åŒæ—¶è¾“å‡ºæ–‡æœ¬å’Œå›¾åƒï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨gr.Carousel()æˆ–gr.Gallery()ç­‰ç»„ä»¶æ¥åŒæ—¶å±•ç¤ºå®ƒä»¬ã€‚
    - **é€‰æ‹©åˆé€‚çš„è¾“å‡ºç±»å‹**ï¼šå¯¹äºç»“æ„åŒ–æ•°æ®è¾“å‡ºï¼Œå¦‚è¡¨æ ¼æˆ–åˆ—è¡¨ï¼Œä½¿ç”¨gr.DataFrame()å¯ä»¥æä¾›ä¸€ä¸ªæ¸…æ™°ä¸”å¯äº¤äº’çš„è§†å›¾ã€‚å¯¹äºéŸ³é¢‘è¾“å‡ºï¼Œä½¿ç”¨gr.Audio()å…è®¸ç”¨æˆ·æ’­æ”¾å’Œç›‘å¬å¤„ç†åçš„éŸ³é¢‘æ–‡ä»¶ã€‚
    - **å¢å¼ºè¾“å‡ºå¯è§†åŒ–**ï¼šåˆ©ç”¨gradioæä¾›çš„å¯è§†åŒ–è¾“å‡ºç»„ä»¶æ¥å¢å¼ºæ¨¡å‹è¾“å‡ºçš„è¡¨ç°åŠ›ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨gr.Plot()æ¥å±•ç¤ºæ•°æ®å›¾è¡¨æˆ–æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ã€‚å¦‚æœæ¨¡å‹ç”Ÿæˆäº†ä¸€ç³»åˆ—å›¾åƒæˆ–è§†é¢‘ï¼Œä½¿ç”¨gr.Gallery()æˆ–gr.Video()å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸å¼•äººçš„å±•ç¤ºæ•ˆæœã€‚

å¸¦æœ‰å›¾ç‰‡ä¸æ–‡å­—è¾“å…¥å’Œè¾“å‡ºçš„gradioç¤ºä¾‹å¦‚ä¸‹ï¼š
```python
import gradio as gr

def process_data(text, image):
    # å‡è®¾è¿™é‡Œæœ‰æ•°æ®å¤„ç†é€»è¾‘
    processed_text = text.upper()
    return processed_text, image

demo = gr.Interface(
    fn=process_data,
    inputs=[gr.TextBox(label="è¾“å…¥æ–‡æœ¬"), gr.Image(label="ä¸Šä¼ å›¾ç‰‡")],
    outputs=[gr.Text(label="å¤„ç†åçš„æ–‡æœ¬"), gr.Image(label="åŸå§‹å›¾ç‰‡")]
)
demo.launch()
```
è¿è¡Œä»£ç åç»“æœå¦‚å›¾3 - 5æ‰€ç¤ºã€‚

![image](https://github.com/user-attachments/assets/f9847d5d-9cc5-4dc6-91fd-76c38045aba4)


### å›¾3 - 5 å¸¦æœ‰å›¾ç‰‡ä¸æ–‡å­—è¾“å…¥å’Œè¾“å‡ºçš„gradioç¤ºä¾‹

3. **è¾“å‡ºä¸­çš„åŠ¨æ€ç•Œé¢ä¸å®æ—¶åé¦ˆ**

å¯¹äºä½¿ç”¨gradioè®¾è®¡çš„é¡µé¢æ¥è¯´ï¼ŒåŠ¨æ€æ•ˆæœæ˜¯å¿…ä¸å¯å°‘çš„éƒ¨åˆ†ã€‚
    - **æ¡ä»¶æ˜¾ç¤ºç»„ä»¶**ï¼šåˆ©ç”¨gradioçš„æ¡ä»¶é€»è¾‘åŠŸèƒ½ï¼Œæ ¹æ®ç”¨æˆ·çš„è¾“å…¥æˆ–é€‰æ‹©åŠ¨æ€åœ°æ˜¾ç¤ºæˆ–éšè—ç•Œé¢ä¸Šçš„æŸäº›ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œè®©ç”¨æˆ·é€‰æ‹©ä¸åŒçš„ä»»åŠ¡ç±»å‹ã€‚æ ¹æ®ç”¨æˆ·çš„é€‰æ‹©ï¼Œåº”ç”¨å¯ä»¥åŠ¨æ€åœ°æ˜¾ç¤ºä¸è¯¥ä»»åŠ¡ç›¸å…³çš„è¾“å…¥å­—æ®µå’ŒæŒ‰é’®ã€‚
    - **ç•Œé¢å…ƒç´ æ›´æ–°**ï¼šé€šè¿‡ç›‘å¬ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå®æ—¶æ›´æ–°ç•Œé¢å…ƒç´ ä»¥åæ˜ ç”¨æˆ·çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä¸Šä¼ ä¸€å¹…å›¾ç‰‡æ—¶ï¼Œåº”ç”¨å¯ä»¥ç«‹å³åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºè¯¥å›¾ç‰‡çš„é¢„è§ˆï¼Œè€Œæ— é¡»ç­‰å¾…è¿›ä¸€æ­¥çš„å¤„ç†æˆ–æäº¤æ“ä½œã€‚
    - **å³æ—¶å¤„ç†ä¸å±•ç¤ºç»“æœ**ï¼šè®¾è®¡åº”ç”¨é€»è¾‘ä»¥å¿«é€Ÿå“åº”ç”¨æˆ·è¾“å…¥ï¼Œå¹¶ç«‹å³å±•ç¤ºå¤„ç†ç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨æ–‡æœ¬å¤„ç†ä»»åŠ¡ä¸­ï¼Œå½“ç”¨æˆ·è¾“å…¥æ–‡æœ¬å¹¶å•å‡»æäº¤æŒ‰é’®æ—¶ï¼Œåº”ç”¨åº”è¿…é€Ÿå¤„ç†è¯¥æ–‡æœ¬ï¼Œå¹¶åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºåˆ†æç»“æœï¼Œå¦‚æƒ…æ„Ÿåˆ†æã€æ–‡æœ¬æ‘˜è¦ç­‰ã€‚ 
    - **ä½¿ç”¨çŠ¶æ€ç®¡ç†**ï¼šåˆ©ç”¨çŠ¶æ€ç®¡ç†æ¥è·Ÿè¸ªå’Œä¿å­˜ç”¨æˆ·çš„äº¤äº’çŠ¶æ€ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªä¼šè¯ä¸­ä¿æŒä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨çŠ¶æ€å˜é‡æ¥è®°å½•ç”¨æˆ·çš„é€‰æ‹©ã€è¾“å…¥å€¼æˆ–å…¶ä»–ç›¸å…³ä¿¡æ¯ï¼Œè¿™æ ·åœ¨åº”ç”¨çš„ä¸åŒéƒ¨åˆ†æˆ–åç»­äº¤äº’ä¸­ï¼Œå¯ä»¥è½»æ¾åœ°è®¿é—®å’Œä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œä»¥æä¾›è¿è´¯çš„ç”¨æˆ·ä½“éªŒã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªåŠ¨æ€é¡µé¢ä¸å®æ—¶åé¦ˆçš„ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
import gradio as gr

def process_image(img, filter_type):
    if filter_type == "Black and White":
        img = img.convert("L")
    return img

demo = gr.Interface(
    fn=process_image,
    inputs=[gr.Image(type="pil"), gr.Radio(["None", "Black and White"])],
    outputs="image"
)
demo.launch()
```
å±•ç¤ºç»“æœå¦‚å›¾3 - 6æ‰€ç¤ºã€‚

![image](https://github.com/user-attachments/assets/b0a41967-e12c-40a6-b619-ae4f14baa75c)


### å›¾3 - 6 gradioä¸­å¸¦æœ‰åŠ¨æ€ç•Œé¢ä¸å®æ—¶åé¦ˆçš„ç¤ºä¾‹
å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç•Œé¢å·¦ä¾§æä¾›äº†æ˜¯å¦å°†ä¸Šä¼ çš„å›¾åƒè¿›è¡Œé»‘ç™½åŒ–æ“ä½œçš„é€‰æ‹©ï¼Œåœ¨å³ä¾§æ ¹æ®å·¦ä¾§çš„é€‰æ‹©åŠ¨æ€ã€å®æ—¶åœ°ç”Ÿæˆç»“æœã€‚

### 3.1.5 gradioä¸­å¸¸ç”¨çš„å‡ ä¸ªç»„ä»¶
æœ¬å°èŠ‚å°†è¯¦è§£gradioä¸­å¸¸ç”¨çš„å‡ ä¸ªç»„ä»¶ã€‚

1. **æ ‡ç­¾ç•Œé¢**

TabbedInterfaceå…è®¸åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆ›å»ºå¤šä¸ªæ ‡ç­¾é¡µï¼Œæ¯ä¸ªæ ‡ç­¾é¡µå¯ä»¥åŒ…å«ä¸åŒçš„ç•Œé¢å’ŒåŠŸèƒ½ã€‚ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š
```python
import gradio as gr

def function1(input1):
    return f"å¤„ç†ç»“æœï¼š{input1}"

def function2(input2):
    return f"åˆ†æç»“æœï¼š{input2}"

tab1 = gr.Interface(function1, "text", "text")
tab2 = gr.Interface(function2, "text", "text")

tabbed_interface = gr.TabbedInterface([tab1, tab2], ["ç•Œé¢1", "ç•Œé¢2"])
tabbed_interface.launch()
```
![image](https://github.com/user-attachments/assets/f4f06131-b46f-49ef-aed7-e24e4fb42b1d)


è¿è¡Œç»“æœå¦‚å›¾3 - 7æ‰€ç¤ºã€‚

### å›¾3 - 7 å¸¦æœ‰æ ‡ç­¾é¡µçš„é¡µé¢å±•ç¤º

å¯ä»¥å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°ï¼Œæ­¤æ—¶çš„é¡µé¢å·¦ä¸Šéƒ¨åˆ†æœ‰ä¸¤ä¸ªæ ‡ç­¾ï¼Œå³â€œç•Œé¢1â€â€œç•Œé¢2â€ï¼Œé€šè¿‡é€‰æ‹©ä¸åŒçš„æ ‡ç­¾æ¥å®Œæˆä¸åŒçš„åŠŸèƒ½ã€‚

2. **Blockså¸ƒå±€**

Blocksæ˜¯gradioä¸­ç”¨äºè‡ªå®šä¹‰å¸ƒå±€çš„ä¸€ç§å¼ºå¤§å·¥å…·ï¼Œå…è®¸ç”¨æˆ·ä»¥æ›´çµæ´»çš„æ–¹å¼ç»„ç»‡ç•Œé¢å…ƒç´ ã€‚ä¸‹é¢ç¤ºä¾‹æ˜¯ä½¿ç”¨Blocksç»„ä»¶å®Œæˆä¸€ä¸ªè‡ªå®šä¹‰æ–‡æœ¬å†…å®¹çš„ç”Ÿæˆï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
import gradio as gr

def sentence_builder(quantity, animal, countries, place, activity_list, morning):
    return f"""The {quantity} {animal}s from {" and ".join(countries)} went to the {place} where they {" and ".join(activity_list)} until the {"morning" if morning else "night"}"""

demo = gr.Interface(
    sentence_builder,
    [
        gr.Slider(2, 20, value=4, label="Count", info="Choose between 2 and 20"),
        gr.Dropdown(
            ["cat", "dog", "bird"], label="Animal", info="Will add more animals later!"
        ),
        gr.CheckboxGroup(["USA", "Japan", "Pakistan"], label="Countries", info="Where are they from?"),
        gr.Radio(["park", "zoo", "road"], label="Location", info="Where did they go?"),
        gr.Dropdown(
            ["ran", "swam", "ate", "slept"], value=["swam", "slept"], multiselect=True, label="Activity", info="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed auctor, nisl eget ultricies aliquam, nunc nisl aliquet nunc, eget aliquam nisl nunc vel nisl."
        ),
        gr.Checkbox(label="Morning", info="Did they do it in the morning?"),
    ],
    "text",
    examples=[
        [2, "cat", ["Japan", "Pakistan"], "park", ["ate", "swam"], True],
        [4, "dog", ["Japan"], "zoo", ["ate", "swam"], False],
        [10, "bird", ["USA", "Pakistan"], "road", ["ran"], False],
        [8, "cat", ["Pakistan"], "zoo", ["ate"], True],
    ]
)
if __name__ == "__main__":
    demo.launch()
```
è¿è¡Œç»“æœå¦‚å›¾3 - 8æ‰€ç¤ºã€‚

![image](https://github.com/user-attachments/assets/1cc4b531-0dab-4d0a-9caf-6e7eebf1fc37)


### å›¾3 - 8 gradioä¸­Blocksæ¨¡å—çš„ç»„åˆä½¿ç”¨ç¤ºä¾‹

å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ä½¿ç”¨Blocksä¸­ä¸åŒçš„é€‰é¡¹å¡ï¼Œå³å¯è·å–åˆ°ä¸åŒçš„æ–‡æœ¬å†…å®¹çš„ç»„åˆã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒBlocksè¿˜æä¾›äº†ä¾¿æ·çš„ç»„åˆæ–¹å¼ï¼Œå…è®¸ç”¨æˆ·å°†ç›¸å…³çš„æ¼”ç¤ºå†…å®¹ç»„åˆå±•ç¤ºï¼Œæ¯”å¦‚é€šè¿‡é€‰é¡¹å¡çš„å½¢å¼ã€‚

ä½¿ç”¨Blocksçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªBlockså¯¹è±¡ï¼Œéšåå°†å®ƒä½œä¸ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆä½¿ç”¨Pythonçš„withè¯­å¥ï¼‰ï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰å¸ƒå±€ã€æ·»åŠ ç»„ä»¶æˆ–è®¾ç½®äº‹ä»¶ã€‚æœ€åï¼Œåªéœ€è°ƒç”¨launch()æ–¹æ³•ï¼Œå³å¯å¯åŠ¨Webåº”ç”¨ç¨‹åºæˆ–æ¼”ç¤ºç¨‹åºã€‚

```python
import gradio as gr

def update(name):
    return f"Welcome to gradio, {name}!"

with gr.Blocks() as demo:
    gr.Markdown("Start typing below and then click **Run** to see the output.")
    with gr.Row():
        inp = gr.TextBox(placeholder="What is your name?")
        out = gr.TextBox()
        btn = gr.Button("Run")
        btn.click(fn=update, inputs=inp, outputs=out)

demo.launch()/
```
è¿™é‡Œå®Œæˆäº†ä¸€ä¸ªä»å·¦åˆ°å³çš„è”åŠ¨ç¤ºä¾‹ï¼Œå³åœ¨å·¦ä¾§è¾“å…¥æ¡†ä¸­è¾“å…¥åç§°ï¼Œç»è¿‡æ•´ç†åï¼Œåœ¨å³ä¾§è¾“å‡ºæ¡†è¿›è¡Œè¾“å‡ºï¼Œå¦‚å›¾3 - 9æ‰€ç¤ºã€‚

![image](https://github.com/user-attachments/assets/a903ed4d-5cef-4b09-8cf3-453c43ecafca)


### å›¾3 - 9 gradioä¸­çš„Blocksè”åŠ¨
å¦å¤–å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶é‡‡ç”¨æ¨ªæ’çš„å½¢å¼å®Œæˆäº†å¯¹Blocksè”åŠ¨çš„å®‰æ’ï¼Œè€Œå¦‚æœè¦é‡‡ç”¨ç«–æ’çš„å½¢å¼å¯¹å±•ç¤ºæ¡†ä½“è¿›è¡Œæ•´åˆï¼Œåˆ™åªéœ€è¦ä½¿ç”¨ç«–æ’çš„æ–¹å¼å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
with gr.Blocks() as demo:
    gr.Markdown("Start typing below and then click **Run** to see the output.")
    inp = gr.TextBox(placeholder="What is your name?")
    out = gr.TextBox()
    btn = gr.Button("Run")
    btn.click(fn=update, inputs=inp, outputs=out)
```

æ­¤æ—¶ç›¸å¯¹äºæ¨ªæ’çš„ä»£ç ï¼Œâ€œwith gr.Row():â€è¿™å¥ä»£ç è¢«å»é™¤ï¼Œä»è€Œå®Œæˆå¯¹å†…å®¹ç«–æ’ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç•¥å¾®å¤æ‚çš„åµŒå¥—å½¢å¼ï¼Œå®ƒä½¿ç”¨Blockså¯¹ä¸åŒé€‰é¡¹å¡è¿›è¡Œé›†æˆï¼Œå¹¶åœ¨æ¯ä¸ªé€‰é¡¹å¡ä¸­å¯¹å±•ç¤ºçš„å†…å®¹è¿›è¡Œè°ƒæ•´ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
import numpy as np
import gradio as gr

def flip_text(x):
    return x[::-1]

def flip_image(x):
    return np.fliplr(x)

demo = gr.Blocks

with demo:
    gr.Markdown("Flip text or image files using this demo.")
    with gr.Tab("Flip Text"):
        text_input = gr.TextBox()
        text_output = gr.TextBox()
        text_button = gr.Button("Flip")
    with gr.Tab("Flip Image"):
        with gr.Row():
            image_input = gr.Image()
            image_output = gr.Image()
        image_button = gr.Button("Flip")

    text_button.click(flip_text, inputs=text_input, outputs=text_output)
    image_button.click(flip_image, inputs=image_input, outputs=image_output)

if __name__ == "__main__":
    demo.launch()
```

å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°ï¼Œä¸åŒé€‰é¡¹å¡ä¸­å¯¹äºç»“æœçš„å±•ç¤ºï¼Œåªéœ€è¦ä¸€å±‚ä¸€å±‚åœ°å¥—è¿›å»å³å¯ã€‚

3. **gradioä¸­çš„Rowä¸Column**

ä¸‹é¢è®²è§£ä¸€ä¸‹gradioå¯¹å¸ƒå±€ä¸­è¡Œå’Œåˆ—çš„å¤„ç†æ–¹æ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸åŒçš„æ’ç‰ˆå†…å®¹æ ¹æ®éœ€è¦å¯ä»¥æ¨ªæ’ï¼Œä¹Ÿå¯ä»¥ç«–æ’å±•ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
import gradio as gr

def update(name):
    return f"Welcome to gradio, {name}!"

demo = gr.Blocks()

with demo:
    with gr.Row():
        inp = gr.TextBox(placeholder="What is your name?")
        out = gr.TextBox()
        btn = gr.Button("Run")
        btn.click(fn=update, inputs=inp, outputs=out)

with demo:
    with gr.Column():
        inp = gr.TextBox(placeholder="What is your name?")
        out = gr.TextBox()
        btn = gr.Button("Run")
        btn.click(fn=update, inputs=inp, outputs=out)

if __name__ == "__main__":
    demo.launch()
```

åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæ¡†æ¶ä¸‹åˆ†åˆ«æ”¾ç½®äº†ä¸åŒçš„å†…å®¹ï¼Œé€šè¿‡ä»£ç å¯ä»¥å¾ˆå®¹æ˜“åœ°å¯¹å„ç»„ä»¶çš„ä½ç½®è¿›è¡Œè®¾ç½®ã€‚

4. **gradioä¸­çš„Chatbot**

Chatbotçš„åŠŸèƒ½åœ¨äºå±•ç¤ºèŠå¤©æœºå™¨äººçš„è¾“å‡ºå†…å®¹ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ‰€æäº¤çš„æ¶ˆæ¯ä»¥åŠæœºå™¨äººçš„ç›¸åº”å›å¤ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒMarkdownçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚ç²—ä½“ã€æ–œä½“ã€ä»£ç æ®µã€è¡¨æ ¼ç­‰æ ¼å¼åŒ–æ–‡æœ¬çš„å±•ç¤ºã€‚æ›´å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™æ¬¾èŠå¤©æœºå™¨äººè¿˜èƒ½å¤„ç†å¹¶å±•ç¤ºéŸ³é¢‘ã€è§†é¢‘ã€å›¾åƒæ–‡ä»¶ï¼Œä¸ºèŠå¤©å†…å®¹å¢æ·»å¤šåª’ä½“å…ƒç´ ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼ŒèŠå¤©æœºå™¨äººåˆ™æä¾›é“¾æ¥ä¾›ç”¨æˆ·æŸ¥çœ‹æˆ–ä¸‹è½½ã€‚ä¸‹é¢è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œé¦–å…ˆä»è¾“å…¥è¾“å‡ºä»£ç ä¸Šæ¥çœ‹ï¼š

```python
def response(message,chat_history):
    bot_response= random.choice(["How are you?", "I love you", "I'm very hungry"])
    chat_history.append((message, bot_response))
    time.sleep(2)
    return "",chat_history
...
chatbot = gr.Chatbot()
msg = gr.TextBox(autofocus=True)
msg.submit(response,[msg,chatbot],[msg,chatbot])
```
å…¶ä¸­çš„responseæ˜¯ç­”å¤å‡½æ•°ï¼Œç”¨äºæ¥æ”¶ä¼ å…¥çš„ä¿¡æ¯ï¼Œå¹¶å°†å®ƒä»¬æ•´åˆåˆ°åä¸ºchat_historyçš„åºåˆ—ä¸­ã€‚æ­¤æ—¶çš„chat_historåºåˆ—å½¢å¼å¦‚ä¸‹ï¼š
```
[msg1,bot_response_1, msg2,bot_response_2,â‹¯, msg100,bot_response_100,]
```
ä¹‹åæ ¹æ®åˆ—è¡¨çš„å†…å®¹åœ¨chat_botä¸­è¿›è¡Œå±•ç¤ºã€‚å®˜æ–¹å¯¹å…¶è§£é‡Šå¦‚ä¸‹ï¼š
 - **è¾“å…¥è¡Œä¸º**ï¼šå°†èŠå¤©æœºå™¨äººä¸­çš„æ¶ˆæ¯ä½œä¸ºList[List[str | None | Tuple]]ä¼ é€’ï¼Œå³åˆ—è¡¨çš„åˆ—è¡¨ã€‚å†…éƒ¨åˆ—è¡¨åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œå³ç”¨æˆ·æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯ã€‚
 - **è¾“å‡ºè¡Œä¸º**ï¼šæœŸæœ›å‡½æ•°è¿”å›List[List[str | None | Tuple]]ï¼Œå³åˆ—è¡¨çš„åˆ—è¡¨ã€‚å†…éƒ¨åˆ—è¡¨åº”åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œå³ç”¨æˆ·æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯ã€‚

å•ä¸ªæ¶ˆæ¯å¯ä»¥æ˜¯ï¼š
 - æœ‰æ•ˆçš„Markdownå­—ç¬¦ä¸²ï¼›
 - å¦‚æœè¦å‘é€æ–‡ä»¶ï¼Œåˆ™ä¸ºå…ƒç»„ï¼ˆ(æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶çš„URL, [å¯é€‰çš„å­—ç¬¦ä¸²æ›¿ä»£æ–‡æœ¬])ï¼‰ï¼›å¦‚æœæ–‡ä»¶æ˜¯å›¾åƒ/è§†é¢‘/éŸ³é¢‘ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨èŠå¤©æœºå™¨äººä¸­æ˜¾ç¤ºï¼›
 - Noneï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯å°†ä¸è¢«æ˜¾ç¤ºã€‚

ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä½¿ç”¨chat_botè¿›è¡Œå¯¹è¯çš„å®Œæ•´ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
import time
import gradio as gr
import os
import random

def response(message, chat_history):
    bot_response = random.choice(["How are you?", "I love you", "I'm very hungry"])
    chat_history.append((message, bot_response))
    time.sleep(2)
    return "", chat_history  # responseè¿”å›çš„ç¬¬ä¸€ä¸ªç©ºå€¼ï¼Œæ˜¯ä¸ºäº†å°†è¾“å…¥msgå†…å®¹ç½®é›¶

app = gr.Blocks()
with app:
    chatbot = gr.Chatbot()
    msg = gr.TextBox(autofocus=True)
    clear = gr.ClearButton([msg, chatbot])
    msg.submit(response,[msg,chatbot],[msg,chatbot])  # submitæ˜¯é‡‡ç”¨é”®ç›˜çš„å›è½¦

app.launch()
```
å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶éšç€msgçš„æäº¤ï¼Œå³æŒ‰ä¸‹å›è½¦é”®åï¼Œè¾“å…¥çš„msgæ–‡æœ¬æ¡†ä¸­çš„å†…å®¹è¢«ä¼ é€ç»™responseå‡½æ•°ï¼Œå¹¶åœ¨å¤„ç†åè¿”å›ã€‚è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œresponseè¿”å›çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯ç©ºå€¼ï¼Œè¿™æ˜¯ä¸ºäº†å°†è¾“å…¥msgå†…å®¹ç½®é›¶ï¼Œè¿™ç‚¹è¯·è¯»è€…è‡ªè¡Œæ¼”ç¤ºã€‚

ä¸‹é¢æ¼”ç¤ºä¸€ä¸‹æœ‰å¤šæ¨¡æ€è¾“å…¥ç»“æ„çš„ChatBotæ–¹æ³•ï¼Œé¦–å…ˆéœ€è¦æä¾›ä¸Šä¼ æ–‡æœ¬å’Œæ–‡æœ¬æ–‡ä»¶çš„å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
def add_text(history, text):
    history = history + [(text, None)]
    return history, ""

def add_file(history, file):
    history = history + [((file.name,), None)]
    return history, ""
```
æ¥ç€å°±æ˜¯å¯¹è¯æ¡†çš„ä¸»è¦æ‰§è¡Œå‡½æ•°ï¼Œåœ¨è¿™é‡Œä»…ç®€å•æä¾›ä¸€ä¸ªå›å¤ï¼Œä¹‹åä½¿ç”¨yieldçš„æ–¹æ³•å°†å¯¹è¯å†…å®¹è¿›è¡Œè¿”å›ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
def bot(history):
    response = "**That's cool!**"
    history[-1][1] = ""
    for character in response:
        history[-1][1] += character
        time.sleep(0.05)
        yield history
```
ä¸Šé¢ä»£ç ä½¿ç”¨å›ºå®šçš„å†…å®¹è¿›è¡Œå›å¤ï¼Œä¹‹åè¿”å›ç”Ÿæˆçš„ç»“æœã€‚å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š
```python
app = gr.Blocks()
with app:
    chatbot = gr.Chatbot([],  # åˆå§‹å€¼ä¸ºç©º
                         elem_id = "chatbot",  # ç»™å›å¤botèµ·ä¸€ä¸ªåå­—
                         bubble_full_width=False, # è¿™ä¸ªå‚æ•°å†³å®šäº†èŠå¤©æ³¡æ³¡ï¼ˆå³æ¶ˆæ¯æ¡†ï¼‰æ˜¯å¦åº”è¯¥å æ®å…¨å®½ã€‚è®¾ç½®ä¸ºFalseæ„å‘³ç€èŠå¤©æ³¡æ³¡ä¸ä¼šå æ®å…¨å®½
                         avatar_images=(None, (os.path.join(os.path.dirname(__file__), "apic.jpg"))), # è¿™ä¸ªå‚æ•°ç”¨æ¥è®¾ç½®èŠå¤©æœºå™¨äººå’Œç”¨æˆ·çš„å¤´åƒ
                         )
    with gr.Row():
        txt = gr.TextBox(
            show_label=False,  # è¿™ä¸ªå‚æ•°å†³å®šäº†æ˜¯å¦æ˜¾ç¤ºæ–‡æœ¬æ¡†çš„æ ‡ç­¾ã€‚æ ‡ç­¾é€šå¸¸ç”¨äºæŒ‡ç¤ºæ–‡æœ¬æ¡†çš„ç”¨é€”æˆ–æœŸæœ›çš„è¾“å…¥ç±»å‹
            placeholder="Enter text and press enter, or upload an image",  # è¿™ä¸ªå‚æ•°è®¾ç½®äº†æ–‡æœ¬æ¡†çš„å ä½ç¬¦æ–‡æœ¬ã€‚å ä½ç¬¦æ–‡æœ¬æ˜¯åœ¨æ–‡æœ¬æ¡†ä¸ºç©ºæ—¶æ˜¾ç¤ºçš„æµ…è‰²æ–‡æœ¬ï¼Œç”¨äºæç¤ºç”¨æˆ·åº”è¯¥è¾“å…¥ä»€ä¹ˆå†…å®¹
            container=False,  # è¿™ä¸ªå‚æ•°å†³å®šäº†æ–‡æœ¬æ¡†æ˜¯å¦åº”è¯¥è¢«è¢«åŒ…å«åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ã€‚

å®¹å™¨é€šå¸¸ç”¨äºæä¾›é¢å¤–çš„æ ·å¼æˆ–å¸ƒå±€æ§åˆ¶ã€‚ç”±äºè¿™é‡Œè®¾ç½®ä¸ºFalseï¼Œæ–‡æœ¬æ¡†å°†ä¸ä¼šè¢«åŒ…å«åœ¨ä»»ä½•å®¹å™¨ä¸­ï¼Œå®ƒå°†ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å…ƒç´ å‘ˆç°
            autofocus=True
        )
        btn = gr.UploadButton("ä¸Šä¼ æ–‡ä»¶ğŸ“„", file_types=["image", "video", "audio"])

    txt_msg = txt.submit(add_text,[chatbot,txt],[chatbot,txt],queue=False).then(bot, chatbot,chatbot,api_name = "bot_response")
    file_msg = btn.upload(add_file,[chatbot, btn],[chatbot,txt],queue=False).then(bot, chatbot,api_name = "file_upload" )
    chatbot.like(print_like_dislike, None, None)

app.launch()
```
åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œæ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶åˆ†åˆ«é‡‡ç”¨txt_msgå’Œbtnä½œä¸ºæ–‡æœ¬å’Œå›¾åƒçš„è§¦å‘æ¨¡å—ï¼Œä½¿å®ƒä»¬å¯ä»¥æ ¹æ®è§¦å‘æ¥å®Œæˆç›¸åº”çš„æ“ä½œã€‚
```python
def print_like_dislike(x: gr.LikeData):
    print(x.index, x.value, x.liked)

chatbot.like(print_like_dislike, None, None)
```

ä¸ºäº†ç¡®è®¤ç”¨æˆ·å¯¹ä¿¡æ¯çš„èµæˆæˆ–è€…å¦å®šæƒ…å†µï¼Œæˆ‘ä»¬åœ¨å¯¹è¯æ¡†ä¸­è¿˜åŠ ä¸Šäº†ç¡®è®¤æŒ‰é’®ï¼Œå¹¶åœ¨åå°æ‰“å°äº†å¯¹åº”çš„ä¿¡æ¯ï¼Œè¿™ç‚¹è¯·è¯»è€…æ³¨æ„ã€‚

5. **gradioä¸­çš„Checkbox**

Checkboxçš„ä½œç”¨æ˜¯è®¾ç½®ä¸åŒçš„å¸ƒå°”å‚æ•°ï¼Œå€¼åªæœ‰Trueå’ŒFalseã€‚å…·ä½“æ¥è¯´ï¼š
 - **è¾“å…¥ï¼ˆAs inputï¼‰**ï¼šå½“å¤é€‰æ¡†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·å•å‡»äº†å¤é€‰æ¡†ï¼Œè¯¥çŠ¶æ€ï¼ˆé€‰ä¸­æˆ–æœªé€‰ä¸­ï¼‰ä¼šä½œä¸ºä¸€ä¸ªå¸ƒå°”å€¼ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚å¦‚æœå¤é€‰æ¡†è¢«é€‰ä¸­ï¼Œåˆ™ä¼ é€’çš„å€¼å¯èƒ½æ˜¯Trueï¼›å¦‚æœæœªè¢«é€‰ä¸­ï¼Œåˆ™ä¼ é€’çš„å€¼å¯èƒ½æ˜¯Falseã€‚ 
 - **è¾“å‡ºï¼ˆAs outputï¼‰**ï¼šcheckboxå‡½æ•°å¤„ç†å®Œè¾“å…¥åï¼Œä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœè¿™ä¸ªè¿”å›å€¼ä¸ºTrueï¼Œé‚£ä¹ˆå¤é€‰æ¡†åº”è¯¥è¢«è®¾ç½®ä¸ºé€‰ä¸­çŠ¶æ€ã€‚å¦‚æœè¿”å›å€¼ä¸ºFalseï¼Œå¤é€‰æ¡†çš„çŠ¶æ€å¯èƒ½ä¼šä¿æŒä¸å˜æˆ–å˜ä¸ºæœªé€‰ä¸­ï¼Œå…·ä½“å–å†³äºå½“å‰çš„å®ç°å’Œä¸Šä¸‹æ–‡ã€‚ 
